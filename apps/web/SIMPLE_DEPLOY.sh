#!/bin/bash

# ============================================================================
# BeautyTryOn - Simple Deployment (Opens All URLs)
# ============================================================================
# This script opens all necessary dashboards in your browser
# You just need to paste the SQL files and click buttons!
# ============================================================================

clear

echo "ğŸš€ BeautyTryOn - Simple Deployment"
echo "===================================="
echo ""
echo "This script will open all necessary pages in your browser."
echo "Follow the instructions below for each tab!"
echo ""
echo "Press Enter to continue..."
read

# Step 1: Database Schema
echo ""
echo "â•â•â• STEP 1: Database Schema â•â•â•"
echo ""
echo "Opening Supabase SQL Editor..."
cat supabase/migrations/001_complete_schema.sql | pbcopy
echo "âœ… Schema SQL copied to clipboard!"
echo ""
open "https://app.supabase.com/project/turepfhrembrjjkgsveq/sql/new"
echo "A browser tab just opened!"
echo ""
echo "ACTION:"
echo "1. Paste (Cmd+V) in the SQL editor"
echo "2. Click 'Run' button"
echo "3. Wait for 'Success' message"
echo ""
read -p "Press Enter when done..."

# Step 2: Sample Data
echo ""
echo "â•â•â• STEP 2: Sample Data â•â•â•"
echo ""
cat supabase/migrations/002_sample_data.sql | pbcopy
echo "âœ… Sample data SQL copied to clipboard!"
echo ""
open "https://app.supabase.com/project/turepfhrembrjjkgsveq/sql/new"
echo "A new SQL editor tab opened!"
echo ""
echo "ACTION:"
echo "1. Paste (Cmd+V) in the new query"
echo "2. Click 'Run' button"
echo "3. Verify 53 rows inserted"
echo ""
read -p "Press Enter when done..."

# Step 3: Storage Buckets
echo ""
echo "â•â•â• STEP 3: Storage Buckets â•â•â•"
echo ""
echo "Opening Supabase Storage..."
open "https://app.supabase.com/project/turepfhrembrjjkgsveq/storage/buckets"
echo ""
echo "ACTION - Create 3 buckets:"
echo ""
echo "1. Click 'New bucket'"
echo "   Name: avatars"
echo "   Public: YES âœ…"
echo "   Click 'Save'"
echo ""
echo "2. Click 'New bucket'"
echo "   Name: store-images"
echo "   Public: YES âœ…"
echo "   Click 'Save'"
echo ""
echo "3. Click 'New bucket'"
echo "   Name: try-on-results"
echo "   Public: NO âŒ"
echo "   Click 'Save'"
echo ""
read -p "Press Enter when all 3 buckets are created..."

# Step 4: Deploy to Vercel
echo ""
echo "â•â•â• STEP 4: Deploy to Vercel â•â•â•"
echo ""
echo "Opening Vercel..."
open "https://vercel.com/new"
echo ""
echo "ACTION:"
echo "1. Import 'beauty-tryon-app' repository"
echo "2. Set Root Directory: apps/web"
echo "3. Add these environment variables:"
echo ""
echo "   NEXT_PUBLIC_SUPABASE_URL"
echo "   https://turepfhrembrjjkgsveq.supabase.co"
echo ""
echo "   NEXT_PUBLIC_SUPABASE_ANON_KEY"
echo "   eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cmVwZmhyZW1icmpqa2dzdmVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2NjA2MTQsImV4cCI6MjA4NDIzNjYxNH0.9WdYp69liic6VL2xxwyrFMgLVo-s7iqfic4-4b2LrBc"
echo ""
echo "4. Click 'Deploy'"
echo "5. Wait 2-3 minutes"
echo "6. Copy your deployment URL when ready"
echo ""
read -p "Press Enter when deployed and you have your URL..."

# Step 5: Configure Auth
echo ""
echo "â•â•â• STEP 5: Configure Authentication â•â•â•"
echo ""
echo "Opening Supabase Auth Configuration..."
open "https://app.supabase.com/project/turepfhrembrjjkgsveq/auth/url-configuration"
echo ""
echo "ACTION:"
echo "1. Paste your Vercel URL in 'Site URL'"
echo "2. Add to 'Redirect URLs':"
echo "   - Your Vercel URL with /** at the end"
echo "   - http://localhost:3000/**"
echo "3. Click 'Save'"
echo ""
read -p "Press Enter when done..."

# Complete!
clear
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                               â•‘"
echo "â•‘                    ğŸ‰ DEPLOYMENT COMPLETE! ğŸ‰                 â•‘"
echo "â•‘                                                               â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Your BeautyTryOn app is now LIVE!"
echo ""
echo "Test your app:"
echo "âœ… Sign up with a new account"
echo "âœ… Try Hair Try-On (25 styles)"
echo "âœ… Try Nail Try-On (28 designs)"
echo "âœ… Browse 6 professional stores"
echo "âœ… Switch to Bulgarian/Russian/Spanish/Turkish"
echo "âœ… Save a try-on to gallery"
echo ""
echo "Ready to generate revenue! ğŸ’°"
echo ""
